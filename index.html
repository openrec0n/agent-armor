<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AgentArmor â€” Security Config for Claude Code</title>
  <link rel="stylesheet" href="/src/web/styles.css" />
</head>
<body>
  <div id="app">
    <header class="header">
      <div class="header-content">
        <div class="header-icon" id="header-icon"></div>
        <h1 class="logo">AgentArmor</h1>
        <p class="tagline">Generate security configurations for Claude Code sessions</p>
        <p class="tagline-sub">Protect your AI coding agent from prompt injection, data theft, and privilege escalation</p>
        <div class="how-it-works">
          Choose a security level <span class="step-arrow">&rarr;</span>
          Customize protections <span class="step-arrow">&rarr;</span>
          Export your config
        </div>
        <div>
          <a href="https://github.com/anthropics/claude-code" target="_blank" rel="noopener" class="docs-link">Claude Code Docs</a>
        </div>
      </div>
    </header>

    <main class="main">
      <!-- Target Selector -->
      <section class="section" id="target-section">
        <div class="section-header">
          <span class="step-num">01</span>
        </div>
        <h2 class="section-title" id="target-title">Where to Apply Protection</h2>
        <p class="section-desc">Choose where your security rules will be enforced.</p>
        <div class="card-row" id="target-selector"></div>
        <div id="target-warning-container"></div>
      </section>

      <!-- Profile Selector -->
      <section class="section" id="profile-section">
        <div class="section-header">
          <span class="step-num">02</span>
        </div>
        <h2 class="section-title" id="profile-title">Choose Your Security Level</h2>
        <p class="section-desc">Start with a preset &mdash; you can fine-tune individual protections below.</p>
        <div class="card-row" id="profile-selector"></div>
      </section>

      <!-- Threat Toggles -->
      <section class="section" id="threats-section">
        <div class="section-header">
          <span class="step-num">03</span>
        </div>
        <h2 class="section-title" id="threats-title">Fine-Tune Protections</h2>
        <p class="section-desc">Toggle individual protections on or off based on your needs. Severity: <span class="badge badge-high">HIGH</span> <span class="badge badge-medium">MEDIUM</span></p>
        <div class="threat-grid" id="threat-panel"></div>
      </section>

      <!-- Customization -->
      <section class="section collapsible" id="customization-section">
        <h2 class="section-title clickable" id="customization-toggle">
          Advanced Settings
          <span class="chevron" id="customization-chevron"></span>
        </h2>
        <div class="collapsible-content" id="customization-panel"></div>
      </section>

      <!-- Merge Existing Config -->
      <section class="section collapsible" id="merge-section">
        <h2 class="section-title clickable" id="merge-toggle">
          Merge with Existing Config
          <span class="chevron" id="merge-chevron"></span>
        </h2>
        <div class="collapsible-content" id="merge-panel">
          <p class="section-desc">Paste your existing settings.json to merge security rules without losing your other configuration.</p>
          <textarea id="existing-config" class="config-textarea" placeholder='Paste your existing settings.json here...' rows="6"></textarea>
          <div class="merge-actions">
            <label class="toggle-label">
              <input type="checkbox" id="merge-enabled" />
              <span>Merge with existing</span>
            </label>
          </div>
        </div>
      </section>

      <!-- Output -->
      <section class="section" id="output-section">
        <div class="section-header">
          <span class="step-num">04</span>
        </div>
        <div class="output-header">
          <h2 class="section-title" id="output-title">Your Security Config</h2>
          <div class="output-stats" id="output-stats"></div>
        </div>
        <div id="output-summary"></div>
        <div class="warnings-panel" id="warnings-panel"></div>
        <pre class="json-preview"><code id="settings-preview"></code></pre>
        <div class="target-path" id="target-path"></div>
        <div class="export-actions">
          <button class="btn btn-primary" id="btn-copy">Copy to Clipboard</button>
          <button class="btn btn-secondary" id="btn-download">Download JSON</button>
        </div>
      </section>
    </main>

    <footer class="footer" id="footer">
      <p>Open source. No data leaves your browser. <a href="https://github.com/openrec0n/agent-armor" target="_blank" rel="noopener">GitHub</a></p>
    </footer>
  </div>

  <script type="module" src="/src/web/app.ts"></script>
</body>
</html>
